{"ast":null,"code":"var _jsxFileName = \"/home/troias/udemy/project-2/01-starting-project/src/components/Meals/MealList/MealsList.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useReducer } from \"react\";\nimport Meals from \"../MealItem/Meals\";\nimport classes from \"./MealsList.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst intialReducerObj = {\n  meals: {\n    price: 0,\n    description: \"\",\n    name: \"\",\n    id: 1\n  },\n  loading: false,\n  error: false,\n  loaded: false\n};\n\nconst mealsReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOADING\":\n      return { ...state,\n        loading: action.payload\n      };\n\n    case \"SET-MEALS\":\n      return { ...state,\n        meals: action.payload\n      };\n\n    case \"ERROR\":\n      return { ...state,\n        error: action.payload\n      };\n\n    case \"LOADED\":\n      return { ...state,\n        loaded: action.payload\n      };\n\n    default:\n      return intialReducerObj;\n  }\n};\n\nconst MealsList = () => {\n  _s();\n\n  const [state, dispatch] = useReducer(mealsReducer, intialReducerObj);\n  useEffect(() => {\n    const getIntialMeals = async () => {\n      try {\n        dispatch({\n          type: \"LOADING\",\n          payload: true\n        });\n        const req = await fetch(\"https://food-app-a635f-default-rtdb.firebaseio.com/meals\");\n\n        if (!req.ok) {\n          throw new Error();\n        }\n\n        const res = await req.json();\n        let loadedMeals = [];\n\n        for (const key in res) {\n          loadedMeals.push({\n            id: key,\n            name: res[key].name,\n            price: res[key].price,\n            description: res[key].description\n          });\n          dispatch({\n            type: \"SET-MEALS\",\n            payload: loadedMeals\n          });\n        }\n\n        dispatch({\n          type: \"LOADED\",\n          payload: true\n        });\n      } catch (error) {\n        dispatch({\n          type: \"ERROR\",\n          payload: error.message\n        });\n      }\n\n      dispatch({\n        type: \"LOADING\",\n        payload: false\n      });\n    };\n\n    getIntialMeals();\n  }, []);\n  let meals = state.loaded && state.meals.map(meals => {\n    return /*#__PURE__*/_jsxDEV(Meals, {\n      props: meals\n    }, meals.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 14\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [state.loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: classes.mealsLoading,\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }, this), state.error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: classes.mealsError,\n      children: [\" \", state.error, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 23\n    }, this), meals]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MealsList, \"ER0ZlCqzMenjnhgobRjqh7Oxxjg=\");\n\n_c = MealsList;\nexport default MealsList;\n\nvar _c;\n\n$RefreshReg$(_c, \"MealsList\");","map":{"version":3,"sources":["/home/troias/udemy/project-2/01-starting-project/src/components/Meals/MealList/MealsList.js"],"names":["useEffect","useReducer","Meals","classes","intialReducerObj","meals","price","description","name","id","loading","error","loaded","mealsReducer","state","action","type","payload","MealsList","dispatch","getIntialMeals","req","fetch","ok","Error","res","json","loadedMeals","key","push","message","map","mealsLoading","mealsError"],"mappings":"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","sourcesContent":["import { useEffect, useReducer } from \"react\"\r\nimport Meals from \"../MealItem/Meals\"\r\nimport classes from \"./MealsList.module.css\"\r\n\r\nconst intialReducerObj = {\r\n  meals: {\r\n    price: 0,\r\n    description: \"\",\r\n    name: \"\",\r\n    id: 1,\r\n  },\r\n  loading: false,\r\n  error: false,\r\n  loaded: false,\r\n}\r\n\r\nconst mealsReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"LOADING\":\r\n      return {\r\n        ...state,\r\n        loading: action.payload,\r\n      }\r\n\r\n    case \"SET-MEALS\":\r\n      return {\r\n        ...state,\r\n        meals: action.payload,\r\n      }\r\n\r\n    case \"ERROR\":\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n      }\r\n\r\n    case \"LOADED\":\r\n      return {\r\n        ...state,\r\n        loaded: action.payload,\r\n      }\r\n    default:\r\n      return intialReducerObj\r\n  }\r\n}\r\n\r\nconst MealsList = () => {\r\n  const [state, dispatch] = useReducer(mealsReducer, intialReducerObj)\r\n\r\n  useEffect(() => {\r\n    const getIntialMeals = async () => {\r\n      try {\r\n        dispatch({\r\n          type: \"LOADING\",\r\n          payload: true,\r\n        })\r\n\r\n        const req = await fetch(\r\n          \"https://food-app-a635f-default-rtdb.firebaseio.com/meals\"\r\n        )\r\n\r\n        if (!req.ok) {\r\n          throw new Error()\r\n        }\r\n\r\n        const res = await req.json()\r\n\r\n        let loadedMeals = []\r\n\r\n        for (const key in res) {\r\n          loadedMeals.push({\r\n            id: key,\r\n            name: res[key].name,\r\n            price: res[key].price,\r\n            description: res[key].description,\r\n          })\r\n\r\n          dispatch({\r\n            type: \"SET-MEALS\",\r\n            payload: loadedMeals,\r\n          })\r\n        }\r\n        dispatch({\r\n          type: \"LOADED\",\r\n          payload: true,\r\n        })\r\n      } catch (error) {\r\n        dispatch({\r\n          type: \"ERROR\",\r\n          payload: error.message,\r\n        })\r\n      }\r\n      dispatch({\r\n        type: \"LOADING\",\r\n        payload: false,\r\n      })\r\n    }\r\n\r\n    getIntialMeals()\r\n  }, [])\r\n\r\n  let meals =\r\n    state.loaded &&\r\n    state.meals.map((meals) => {\r\n      return <Meals key={meals.id} props={meals} />\r\n    })\r\n\r\n  return (\r\n    <div>\r\n      {state.loading && <p className={classes.mealsLoading}>Loading...</p>}\r\n      {state.error && <p className={classes.mealsError}> {state.error} </p>}\r\n      {meals}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MealsList\r\n"]},"metadata":{},"sourceType":"module"}