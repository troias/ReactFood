{"ast":null,"code":"import _regeneratorRuntime from\"/home/troias/udemy/project-2/01-starting-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/troias/udemy/project-2/01-starting-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/troias/udemy/project-2/01-starting-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/troias/udemy/project-2/01-starting-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useEffect,useReducer}from\"react\";import Meals from\"../MealItem/Meals\";import classes from\"./MealsList.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var intialReducerObj={meals:{price:0,description:\"\",name:\"\",id:1},loading:false,error:false,loaded:false};var mealsReducer=function mealsReducer(state,action){switch(action.type){case\"LOADING\":return _objectSpread(_objectSpread({},state),{},{loading:action.payload});case\"SET-MEALS\":return _objectSpread(_objectSpread({},state),{},{meals:action.payload});case\"ERROR\":return _objectSpread(_objectSpread({},state),{},{error:action.payload});case\"LOADED\":return _objectSpread(_objectSpread({},state),{},{loaded:action.payload});default:return intialReducerObj;}};var MealsList=function MealsList(){var _useReducer=useReducer(mealsReducer,intialReducerObj),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){var getIntialMeals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var req,res,loadedMeals,key;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:\"LOADING\",payload:true});_context.next=4;return fetch(\"https://food-app-a635f-default-rtdb.firebaseio.com/meals.json\");case 4:req=_context.sent;if(req.ok){_context.next=7;break;}throw new Error();case 7:_context.next=9;return req.json();case 9:res=_context.sent;loadedMeals=[];for(key in res){loadedMeals.push({id:key,name:res[key].name,price:res[key].price,description:res[key].description});dispatch({type:\"SET-MEALS\",payload:loadedMeals});}dispatch({type:\"LOADED\",payload:true});_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);dispatch({type:\"ERROR\",payload:_context.t0.message});case 18:dispatch({type:\"LOADING\",payload:false});case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function getIntialMeals(){return _ref.apply(this,arguments);};}();getIntialMeals();},[]);var meals=state.loaded&&state.meals.map(function(meals){return/*#__PURE__*/_jsx(Meals,{props:meals},meals.id);});return/*#__PURE__*/_jsxs(\"div\",{children:[state.loading&&/*#__PURE__*/_jsx(\"p\",{className:classes.mealsLoading,children:\"Loading...\"}),state.error&&/*#__PURE__*/_jsxs(\"p\",{className:classes.mealsError,children:[\" \",state.error,\" \"]}),meals]});};export default MealsList;","map":{"version":3,"sources":["/home/troias/udemy/project-2/01-starting-project/src/components/Meals/MealList/MealsList.js"],"names":["useEffect","useReducer","Meals","classes","intialReducerObj","meals","price","description","name","id","loading","error","loaded","mealsReducer","state","action","type","payload","MealsList","dispatch","getIntialMeals","fetch","req","ok","Error","json","res","loadedMeals","key","push","message","map","mealsLoading","mealsError"],"mappings":"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","sourcesContent":["import { useEffect, useReducer } from \"react\";\r\nimport Meals from \"../MealItem/Meals\";\r\nimport classes from \"./MealsList.module.css\"\r\n\r\n\r\nconst intialReducerObj = {\r\n  meals: {\r\n    price: 0, \r\n    description: \"\", \r\n    name: \"\", \r\n    id: 1\r\n  },\r\n  loading: false,\r\n  error: false,\r\n  loaded: false,\r\n};\r\n\r\nconst mealsReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"LOADING\":\r\n      return {\r\n        ...state,\r\n        loading: action.payload,\r\n      };\r\n\r\n    case \"SET-MEALS\":\r\n      return {\r\n        ...state,\r\n        meals: action.payload,\r\n      };\r\n\r\n    case \"ERROR\":\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n      };\r\n\r\n    case \"LOADED\":\r\n      return {\r\n        ...state,\r\n        loaded: action.payload,\r\n      };\r\n    default:\r\n      return intialReducerObj;\r\n  }\r\n};\r\n\r\nconst MealsList = () => {\r\n  const [state, dispatch] = useReducer(mealsReducer, intialReducerObj);\r\n\r\n  useEffect(() => {\r\n    const getIntialMeals = async () => {\r\n      try {\r\n        dispatch({\r\n          type: \"LOADING\",\r\n          payload: true,\r\n        });\r\n\r\n        const req = await fetch(\r\n          \"https://food-app-a635f-default-rtdb.firebaseio.com/meals.json\"\r\n        );\r\n\r\n        if (!req.ok) {\r\n          throw new Error();\r\n        }\r\n\r\n        const res = await req.json();\r\n\r\n        let loadedMeals = [];\r\n\r\n        for (const key in res) {\r\n          loadedMeals.push({\r\n            id: key,\r\n            name: res[key].name,\r\n            price: res[key].price,\r\n            description: res[key].description,\r\n          });\r\n\r\n  \r\n          dispatch({\r\n            type: \"SET-MEALS\",\r\n            payload: loadedMeals,\r\n          });\r\n        }\r\n        dispatch({\r\n          type: \"LOADED\",\r\n          payload: true,\r\n        });\r\n      } catch (error) {\r\n        dispatch({\r\n          type: \"ERROR\",\r\n          payload: error.message,\r\n        });\r\n      }\r\n      dispatch({\r\n        type: \"LOADING\",\r\n        payload: false,\r\n      });\r\n    };\r\n\r\n    getIntialMeals();\r\n  }, []);\r\n\r\n  let meals = state.loaded &&\r\n        state.meals.map((meals) => {\r\n          return <Meals key={meals.id} props={meals} />;\r\n        })\r\n\r\n  return (\r\n    <div>\r\n      {state.loading && <p className={classes.mealsLoading}>Loading...</p>}\r\n      {state.error && <p className={classes.mealsError}> {state.error} </p>}\r\n      {meals}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MealsList;\r\n"]},"metadata":{},"sourceType":"module"}